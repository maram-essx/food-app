"use strict";(self.webpackChunkfood_app=self.webpackChunkfood_app||[]).push([[237],{6237:(H,h,a)=>{a.r(h),a.d(h,{RecipesModule:()=>j});var c=a(6814),m=a(3403),A=a(8483),e=a(5879),f=a(7302),_=a(4400),C=a(7700),l=a(6223),d=a(6311),x=a(617),R=a(2296),b=a(2032),g=a(9157),I=a(3365),Z=a(4913),T=a(3680);function y(i,s){if(1&i){const t=e.EpF();e.TgZ(0,"button",24),e.NdJ("click",function(){e.CHM(t);const o=e.oxw();return o.searchValue="",e.KtG(o.getRecipesData())}),e.TgZ(1,"mat-icon"),e._uU(2,"close"),e.qZA()()}}function U(i,s){if(1&i&&(e.TgZ(0,"mat-option",25),e._uU(1),e.qZA()),2&i){const t=s.$implicit;e.Q6J("value",t.id),e.xp6(1),e.Oqu(t.name)}}function q(i,s){if(1&i&&(e.TgZ(0,"mat-option",25),e._uU(1),e.qZA()),2&i){const t=s.$implicit;e.Q6J("value",t.id),e.xp6(1),e.Oqu(t.name)}}function N(i,s){1&i&&(e.TgZ(0,"span"),e._uU(1,","),e.qZA())}function S(i,s){if(1&i&&(e.TgZ(0,"span"),e._uU(1),e.YNc(2,N,2,0,"span",33),e.qZA()),2&i){const t=s.$implicit,n=e.oxw().$implicit;e.xp6(1),e.hij(" ",t.name," "),e.xp6(1),e.Q6J("ngIf",n.category.length>1)}}const D=function(i){return["edit",i]};function J(i,s){if(1&i){const t=e.EpF();e.TgZ(0,"tr")(1,"td"),e._uU(2),e.qZA(),e.TgZ(3,"td"),e._uU(4),e.qZA(),e.TgZ(5,"td",26),e._UZ(6,"img",27),e.qZA(),e.TgZ(7,"td"),e._uU(8),e.qZA(),e.TgZ(9,"td"),e._uU(10),e.qZA(),e.TgZ(11,"td"),e._uU(12),e.qZA(),e.TgZ(13,"td"),e.YNc(14,S,3,2,"span",21),e.qZA(),e.TgZ(15,"td"),e._uU(16),e.ALo(17,"date"),e.qZA(),e.TgZ(18,"td"),e._uU(19),e.ALo(20,"date"),e.qZA(),e.TgZ(21,"td")(22,"button",28)(23,"mat-icon"),e._uU(24,"more_vert"),e.qZA()(),e.TgZ(25,"mat-menu",null,29)(27,"button",30)(28,"mat-icon"),e._uU(29,"visibility"),e.qZA(),e.TgZ(30,"span"),e._uU(31,"view"),e.qZA()(),e.TgZ(32,"button",31)(33,"mat-icon"),e._uU(34,"edit"),e.qZA(),e.TgZ(35,"span"),e._uU(36,"edit"),e.qZA()(),e.TgZ(37,"button",32),e.NdJ("click",function(){const p=e.CHM(t).$implicit,r=e.oxw();return e.KtG(r.openDeleteDialog(p.id))}),e.TgZ(38,"mat-icon"),e._uU(39,"delete"),e.qZA(),e.TgZ(40,"span"),e._uU(41,"delete"),e.qZA()()()()()}if(2&i){const t=s.$implicit,n=e.MAs(26),o=e.oxw();e.xp6(2),e.Oqu(t.id),e.xp6(2),e.Oqu(t.name),e.xp6(2),e.Q6J("src",t.imagePath?o.baseUrlImg+t.imagePath:o.emptyImg,e.LSH),e.xp6(2),e.Oqu(t.price),e.xp6(2),e.Oqu(t.description),e.xp6(2),e.Oqu(t.tag.name),e.xp6(2),e.Q6J("ngForOf",t.category),e.xp6(2),e.Oqu(e.xi3(17,11,t.creationDate,"dd-mm-yy hh:mm a")),e.xp6(3),e.Oqu(e.xi3(20,14,t.modificationDate,"dd-mm-yy hh:mm a")),e.xp6(3),e.Q6J("matMenuTriggerFor",n),e.xp6(10),e.Q6J("routerLink",e.VKq(17,D,t.id))}}const z=function(){return[5,10,25,100]};let O=(()=>{class i{handlePageEvent(t){console.log(t),this.pageSize=t.pageSize,this.pageNumber=t.pageIndex,this.getRecipesData()}constructor(t,n,o){this._CategoryService=t,this._RecipeService=n,this.dialog=o,this.baseUrlImg="https://upskilling-egypt.com:3006/",this.emptyImg="../../../assets/images/auth-bg.png",this.searchValue="",this.hidePageSize=!1,this.showPageSizeOptions=!0,this.showFirstLastButtons=!0,this.disabled=!1,this.pageSize=10,this.pageNumber=1,this.categoryItem="",this.listTags=[],this.listCategories={data:[],pageSize:0,pageNumber:0,totalNumberOfRecords:0,totalNumberOfPages:0},this.tagId=0,this.categoryId=0,this.getRecipesData(),this.getTags(),this.getAllCategories()}getRecipesData(){this._RecipeService.getAllRecipes({name:this.searchValue,tagId:this.tagId,categoryId:this.categoryId,pageSize:this.pageSize,pageNumber:this.pageNumber}).subscribe({next:n=>{this.listData=n,console.log("res of getRecipesData"),console.log(n)},error:n=>{console.log(n)}})}getAllCategories(){this._CategoryService.getAllCategories(this.pageSize,this.pageNumber).subscribe({next:t=>{this.listCategories=t,console.log(`Category REsponse ${t}`),console.log(t.data)},error:t=>{console.log(t)}})}getTags(){this._RecipeService.getAllTags().subscribe({next:t=>{this.listTags=t,console.log("res of getTags"),console.log(t)},error:t=>{console.log(t)}})}openDeleteDialog(t){this.dialog.open(A.T,{data:{itemId:t}}).afterClosed().subscribe(o=>{console.log("The dialog was closed"),console.log(o),o&&this.deleteItem(o)})}deleteItem(t){this._RecipeService.onDeleteItem(t).subscribe({next:n=>{console.log("item deleted"),console.log(n)},error:n=>{console.log(n)},complete:()=>{this.getRecipesData()}})}static#e=this.\u0275fac=function(n){return new(n||i)(e.Y36(f.H),e.Y36(_.j),e.Y36(C.uw))};static#t=this.\u0275cmp=e.Xpm({type:i,selectors:[["app-recipes"]],decls:70,vars:12,consts:[[1,"page-title"],[1,"row","align-items-center","px-3"],[1,"col-md-8"],[1,"col-md-4","text-end"],["src","../../../assets/images/Group 48102127.svg","alt","",1,"w-50"],[1,"d-flex","align-items-center","justify-content-between","mt-2"],[1,"h4"],["routerLink","add",1,"primary"],[1,"container"],[1,"row"],[1,"col-md-6"],["appearance","outline",1,"example-form-field","w-100"],["matInput","","type","text",3,"ngModel","ngModelChange","keyup.enter"],["matSuffix","","mat-icon-button","","aria-label","Clear",3,"click",4,"ngIf"],[1,"col-md-3"],["appearance","outline"],[3,"ngModel","ngModelChange","selectionChange"],["value","0"],[3,"value",4,"ngFor","ngForOf"],[1,"table","table-striped"],[1,"text-uppercase","px-4"],[4,"ngFor","ngForOf"],["aria-label","Select page",1,"demo-paginator",3,"length","pageSize","pageIndex","pageSizeOptions","page"],["paginator",""],["matSuffix","","mat-icon-button","","aria-label","Clear",3,"click"],[3,"value"],[1,"w-25"],["alt","",1,"w-25",3,"src"],["mat-icon-button","","aria-label","Example icon-button with a menu",3,"matMenuTriggerFor"],["menu","matMenu"],["mat-menu-item",""],["mat-menu-item","",3,"routerLink"],["mat-menu-item","",3,"click"],[4,"ngIf"]],template:function(n,o){1&n&&(e.TgZ(0,"section")(1,"div",0)(2,"div",1)(3,"div",2)(4,"div")(5,"h1"),e._uU(6,"Recipe "),e.TgZ(7,"span"),e._uU(8,"item"),e.qZA()(),e.TgZ(9,"p"),e._uU(10," This is a welcoming screen for the entry of the application , you can now see the options "),e.qZA()()(),e.TgZ(11,"div",3)(12,"div"),e._UZ(13,"img",4),e.qZA()()()(),e.TgZ(14,"div")(15,"div",5)(16,"h2",6),e._uU(17,"Recipe Table Details"),e.qZA(),e.TgZ(18,"button",7),e._uU(19,"Add New Recipe"),e.qZA()(),e.TgZ(20,"p"),e._uU(21,"You can check all details"),e.qZA(),e.TgZ(22,"div",8)(23,"div",9)(24,"div",10)(25,"mat-form-field",11)(26,"mat-label"),e._uU(27,"Clearable input"),e.qZA(),e.TgZ(28,"input",12),e.NdJ("ngModelChange",function(r){return o.searchValue=r})("keyup.enter",function(){return o.getRecipesData()}),e.qZA(),e.YNc(29,y,3,0,"button",13),e.qZA()(),e.TgZ(30,"div",14)(31,"mat-form-field",15)(32,"mat-label"),e._uU(33,"Tag"),e.qZA(),e.TgZ(34,"mat-select",16),e.NdJ("ngModelChange",function(r){return o.tagId=r})("selectionChange",function(){return o.getRecipesData()}),e.TgZ(35,"mat-option",17),e._uU(36,"All"),e.qZA(),e.YNc(37,U,2,2,"mat-option",18),e.qZA()()(),e.TgZ(38,"div",14)(39,"mat-form-field",15)(40,"mat-label"),e._uU(41,"category"),e.qZA(),e.TgZ(42,"mat-select",16),e.NdJ("ngModelChange",function(r){return o.categoryId=r})("selectionChange",function(){return o.getRecipesData()}),e.TgZ(43,"mat-option",17),e._uU(44,"All"),e.qZA(),e.YNc(45,q,2,2,"mat-option",18),e.qZA()()()()(),e.TgZ(46,"table",19)(47,"thead",20)(48,"th"),e._uU(49,"id"),e.qZA(),e.TgZ(50,"th"),e._uU(51,"name"),e.qZA(),e.TgZ(52,"th"),e._uU(53,"image"),e.qZA(),e.TgZ(54,"th"),e._uU(55,"price"),e.qZA(),e.TgZ(56,"th"),e._uU(57,"desc"),e.qZA(),e.TgZ(58,"th"),e._uU(59,"tag"),e.qZA(),e.TgZ(60,"th"),e._uU(61,"category"),e.qZA(),e.TgZ(62,"th"),e._uU(63,"creationDate"),e.qZA(),e.TgZ(64,"th"),e._uU(65,"modificationDate"),e.qZA()(),e.TgZ(66,"tbody"),e.YNc(67,J,42,19,"tr",21),e.qZA()(),e.TgZ(68,"mat-paginator",22,23),e.NdJ("page",function(r){return o.handlePageEvent(r)}),e.qZA()()()),2&n&&(e.xp6(28),e.Q6J("ngModel",o.searchValue),e.xp6(1),e.Q6J("ngIf",o.searchValue),e.xp6(5),e.Q6J("ngModel",o.tagId),e.xp6(3),e.Q6J("ngForOf",o.listTags),e.xp6(5),e.Q6J("ngModel",o.categoryId),e.xp6(3),e.Q6J("ngForOf",o.listCategories.data),e.xp6(22),e.Q6J("ngForOf",null==o.listData?null:o.listData.data),e.xp6(1),e.Q6J("length",null==o.listData?null:o.listData.totalNumberOfRecords)("pageSize",o.pageSize)("pageIndex",o.pageNumber)("pageSizeOptions",e.DdM(11,z)))},dependencies:[c.sg,c.O5,m.rH,l.Fj,l.JJ,d.VK,d.OP,d.p6,x.Hw,R.RK,b.Nt,g.KE,g.hX,g.R9,l.On,I.NW,Z.gD,T.ey,c.uU]})}return i})();var u=a(4426);function F(i,s){if(1&i&&(e.TgZ(0,"mat-option",16),e._uU(1),e.qZA()),2&i){const t=s.$implicit;e.Q6J("value",t.id),e.xp6(1),e.Oqu(t.name)}}function w(i,s){if(1&i&&(e.TgZ(0,"mat-option",16),e._uU(1),e.qZA()),2&i){const t=s.$implicit;e.Q6J("value",t.id),e.xp6(1),e.Oqu(t.name)}}function Q(i,s){1&i&&(e.TgZ(0,"ngx-dropzone-label"),e._uU(1,"Drag and Drop image "),e.TgZ(2,"span",17),e._uU(3,"Choose image "),e.qZA(),e._uU(4,"to upload"),e.qZA())}function M(i,s){if(1&i&&(e.TgZ(0,"ngx-dropzone-label"),e._UZ(1,"img",18),e.qZA()),2&i){const t=e.oxw();e.xp6(1),e.Q6J("src",t.imgSrc,e.LSH)}}function E(i,s){if(1&i){const t=e.EpF();e.TgZ(0,"ngx-dropzone-image-preview",19),e.NdJ("removed",function(){const p=e.CHM(t).$implicit,r=e.oxw();return e.KtG(r.onRemove(p))}),e.qZA()}if(2&i){const t=s.$implicit;e.Q6J("removable",!0)("file",t)}}let v=(()=>{class i{constructor(t,n,o){this._RecipeService=t,this._CategoryService=n,this._ActivatedRoute=o,this.addRecipeForm=new l.cw({name:new l.NI(null),description:new l.NI(null),price:new l.NI(null),tagId:new l.NI(null),recipeImage:new l.NI(null),categoriesIds:new l.NI(null)}),this.files=[],this.pageSize=10,this.pageNumber=1,this.recipeId=0,this.listTags=[],this.listCategories={data:[],pageSize:0,pageNumber:0,totalNumberOfRecords:0,totalNumberOfPages:0},this.recipeId=o.snapshot.params.id,this.getAllCategories(),this.getTags(),this.recipeId&&(console.log(this.recipeId),this.getRecipeById(this.recipeId))}onSelect(t){this.files.push(...t.addedFiles),this.imgSrc=this.files[0]}onRemove(t){this.files.splice(this.files.indexOf(t),1)}getAllCategories(){this._CategoryService.getAllCategories(this.pageSize,this.pageNumber).subscribe({next:t=>{this.listCategories=t,console.log(`Category REsponse ${t}`),console.log(t.data)},error:t=>{console.log(t)}})}getTags(){this._RecipeService.getAllTags().subscribe({next:t=>{this.listTags=t,console.log("res of getTags"),console.log(t)},error:t=>{console.log(t)}})}sendData(t){let n=new FormData;n.append("name",t.value.name),n.append("description",t.value.description),n.append("price",t.value.price),n.append("tagId ",t.value.tagId.id),n.append("recipeImage",this.imgSrc),n.append("categoriesIds",t.value.categoriesIds),this.recipeId?this._RecipeService.onEditRecipe(n,this.recipeId).subscribe({next:o=>{console.log(o)}}):this._RecipeService.onAddRecipe(n).subscribe({next:o=>{console.log(" ofaddrec"),console.log(o),console.log(o.data)}})}getRecipeById(t){this._RecipeService.getRecipeById(t).subscribe({next:n=>{this.recipeDta=n,console.log("this.recipeDta"),console.log(this.recipeDta)},error:n=>{console.log(n)},complete:()=>{this.addRecipeForm.patchValue({name:this.recipeDta.name,description:this.recipeDta.description,price:this.recipeDta.price,tagId:this.recipeDta.tag.id,recipeImage:this.recipeDta.imagePath,categoriesIds:this.recipeDta.category.map(n=>n.id)})}})}static#e=this.\u0275fac=function(n){return new(n||i)(e.Y36(_.j),e.Y36(f.H),e.Y36(m.gz))};static#t=this.\u0275cmp=e.Xpm({type:i,selectors:[["app-add-edit-recipe"]],decls:30,vars:7,consts:[[1,"container"],[3,"formGroup","ngSubmit"],[1,"row"],[1,"col-md-12"],["formControlName","name","type","text","placeholder","name",1,"form-control"],["formControlName","price","type","text","placeholder","price",1,"form-control"],[1,"col-md-6"],["appearance","outline"],["formControlName","tagId"],[3,"value",4,"ngFor","ngForOf"],["multiple","","formControlName","categoriesIds"],["formControlName","description","type","text",1,"form-control"],[3,"multiple","change"],[4,"ngIf"],["ngProjectAs","ngx-dropzone-preview",5,["ngx-dropzone-preview"],3,"removable","file","removed",4,"ngFor","ngForOf"],["type","submit",1,"primary"],[3,"value"],[1,"text-success","fw-bold"],["alt","",1,"w-25",3,"src"],["ngProjectAs","ngx-dropzone-preview",5,["ngx-dropzone-preview"],3,"removable","file","removed"]],template:function(n,o){1&n&&(e.TgZ(0,"section")(1,"div",0)(2,"form",1),e.NdJ("ngSubmit",function(){return o.sendData(o.addRecipeForm)}),e.TgZ(3,"div",2)(4,"div",3),e._UZ(5,"input",4),e.qZA(),e.TgZ(6,"div",3),e._UZ(7,"input",5),e.qZA(),e.TgZ(8,"div",6)(9,"mat-form-field",7)(10,"mat-label"),e._uU(11,"Tag"),e.qZA(),e.TgZ(12,"mat-select",8),e.YNc(13,F,2,2,"mat-option",9),e.qZA()()(),e.TgZ(14,"div",6)(15,"mat-form-field",7)(16,"mat-label"),e._uU(17,"category"),e.qZA(),e.TgZ(18,"mat-select",10),e.YNc(19,w,2,2,"mat-option",9),e.qZA()()(),e.TgZ(20,"div",3)(21,"textarea",11),e._uU(22,"        "),e.qZA()(),e.TgZ(23,"ngx-dropzone",12),e.NdJ("change",function(r){return o.onSelect(r)}),e.YNc(24,Q,5,0,"ngx-dropzone-label",13),e.YNc(25,M,2,1,"ngx-dropzone-label",13),e.YNc(26,E,1,2,"ngx-dropzone-image-preview",14),e.qZA()(),e.TgZ(27,"div")(28,"button",15),e._uU(29," Save "),e.qZA()()()()()),2&n&&(e.xp6(2),e.Q6J("formGroup",o.addRecipeForm),e.xp6(11),e.Q6J("ngForOf",o.listTags),e.xp6(6),e.Q6J("ngForOf",o.listCategories.data),e.xp6(4),e.Q6J("multiple",!1),e.xp6(1),e.Q6J("ngIf",!o.imgSrc),e.xp6(1),e.Q6J("ngIf",o.imgSrc),e.xp6(1),e.Q6J("ngForOf",o.files))},dependencies:[c.sg,c.O5,u._f,u.NP,u.sv,l._Y,l.Fj,l.JJ,l.JL,l.sg,l.u,g.KE,g.hX,Z.gD,T.ey],styles:[".form-control[_ngcontent-%COMP%]{margin:1rem 0}"]})}return i})();const Y=[{path:"",component:O},{path:"add",component:v},{path:"edit/:id",component:v}];let P=(()=>{class i{static#e=this.\u0275fac=function(n){return new(n||i)};static#t=this.\u0275mod=e.oAB({type:i});static#i=this.\u0275inj=e.cJS({imports:[m.Bz.forChild(Y),m.Bz]})}return i})();var $=a(8718);let j=(()=>{class i{static#e=this.\u0275fac=function(n){return new(n||i)};static#t=this.\u0275mod=e.oAB({type:i});static#i=this.\u0275inj=e.cJS({imports:[c.ez,P,$.G]})}return i})()}}]);